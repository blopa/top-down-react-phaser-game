{"version":3,"sources":["game/assets/sprites/atlas/hero.png","game/assets/sprites/atlas/slime.png","game/assets/sprites/atlas/heart.png","game/assets/sprites/atlas/coin.png","game/assets/sprites/maps/tilesets/tileset.png","game/assets/images/main_menu_background.png","game/assets/images/game_over_background.png","game/assets/images/game_logo.png","game/assets/images/heart_container.png","game/assets/images/sword.png","game/assets/images/push.png","game/assets/sprites/atlas/npc_01.png","game/assets/sprites/atlas/npc_02.png","game/assets/sprites/atlas/npc_03.png","game/assets/sprites/atlas/npc_04.png","game/scenes/BootScene.js","game/scenes/MainMenuScene.js","game/scenes/GameOverScene.js","game/utils.js","game/constants.js","game/scenes/GameScene.js","game/assets/images/dialog_borderbox.png","game/GameMenu.js","game/Message.js","game/DialogBox.js","game/assets/images/coin.png","game/HeroCoin.js","game/assets/images/health.png","game/HeroHealth.js","App.js","reportWebVitals.js","index.js"],"names":["BootScene","fontSize","progressBar","this","add","graphics","progressBox","cameras","main","gameWidth","width","gameHeight","height","barPositionX","Math","ceil","fillStyle","fillRect","loadingText","text","fontFamily","size","fill","color","setOrigin","setResolution","percentText","assetText","load","on","value","clear","setText","Number","parseInt","file","key","destroy","tilemapTiledJSON","homePageCity","homePageHouse01Map","homePageHouse02Map","homePageHouse03Map","atlas","heroImage","heroJson","slimeImage","slimeJson","heartImage","heartJson","coinImage","coinJson","npc01Image","npc01Json","npc02Image","npc02Json","npc03Image","npc03Json","npc04Image","npc04Json","image","tilesetImage","mainMenuBackgroundImage","gameOverBackgroundImage","gameLogoImage","heartContainerImage","swordImage","pushImage","scene","start","Scene","MainMenuScene","setDepth","scale","max","setScale","customEvent","CustomEvent","detail","menuItems","menuPosition","window","dispatchEvent","addEventListener","gameMenuSelectedEventListener","selectedItem","heroStatus","position","x","y","previousPosition","frame","facingDirection","health","maxHealth","coin","canPush","haveSword","mapKey","location","reload","removeEventListener","createInteractiveGameObject","name","isDebug","origin","customCollider","GameObjects","Rectangle","isCustomCollider","setFillStyle","physics","existing","body","setAllowGravity","setImmovable","SCENE_FADE_TIME","GameScene","enterKey","spaceKey","cursors","wasd","isShowingDialog","isTeleporting","isAttacking","data","initData","currentPosition","gridEngine","getPosition","getFacingDirection","assetKey","animation","anims","generateFrameNames","filter","includes","parts","split","Boolean","isNaN","sort","a","b","animationName","create","frames","replace","frameRate","repeat","yoyo","direction","spriteKey","trim","npcKey","movementType","delay","area","Array","from","length","heroSprite","map","v","index","calculateHeroHealthState","healthStates","heroCoins","enemyType","isDebugMode","config","debug","PhaserMath","Between","itemType","item","sprite","itemsSprites","play","camera","game","sys","initialPosition","initialFrame","heroHealth","heroMaxHealth","heroCoin","heroCanPush","heroHaveSword","fadeIn","input","keyboard","addKey","Input","Keyboard","KeyCodes","ENTER","SPACE","createCursorKeys","addKeys","up","W","down","S","left","A","right","D","make","tilemap","addTilesetImage","phaserGame","updateHeroHealthUi","calculateHeroHealthStates","updateHeroCoinUi","restoreHealth","restore","min","increaseMaxHealth","increase","collectCoin","coinQuantity","takeDamage","damage","time","delayedCall","fadeOut","tweens","targets","alpha","ease","Easing","Elastic","InOut","duration","setSize","setOffset","heroActionCollider","heroPresenceCollider","heroObjectCollider","group","exists","getFramesForAnimation","enemiesData","elementsLayers","i","layer","createLayer","properties","forEach","property","collider","layers","npcsKeys","getObjectLayer","objects","type","overlap","objA","objB","JustDown","characterName","dialogBoxFinishedEventListener","extractNpcDataFromTiled","push","enemyAI","speed","enemySpecies","getEnemySpecies","enemyName","extractTeleportDataFromTiled","teleportToMapKey","teleportToX","teleportToY","overlapCollider","world","removeCollider","restart","calculatePreviousTeleportPosition","startFollow","setFollowOffset","setBounds","widthInPixels","gameSize","heightInPixels","setPosition","gridEngineConfig","characters","id","startPosition","offsetY","find","obj","setVisible","enemiesSprites","enemyData","enemy","setTint","getEnemyColor","updateFollowHeroPosition","lastKnowHeroPosition","isSpaceJustDown","spawnItem","npcSprites","npcData","npc","createPlayerWalkingAnimation","createPlayerAttackAnimation","animationFrame","moveRandomly","isMoving","getEnemyAttackSpeed","canSeeHero","isFollowingHero","heroPosition","heroBackPosition","getBackPosition","enemyPosition","setSpeed","moveTo","NoPathFoundStrategy","embedded","movementStarted","subscribe","charId","getChildren","npcSprite","texture","enemySprite","movementStopped","stop","setFrame","getStopFrame","directionChanged","update","setX","setY","stopMovement","getOppositeDirection","tile","wasHandled","pixelX","pixelY","newPosition","calculatePushTilePosition","every","t","tilemapLayer","getTileAtWorldXY","ge_collide","isMoved","onComplete","newTile","putTileAt","isDown","move","useStyles","makeStyles","theme","menuWrapper","multiplier","textTransform","transform","menuPositionWrapper","innerWidth","menuWidth","minWidth","top","menuItemsWrapper","textAlign","padding","menuItem","cursor","listStyle","marginBottom","backgroundColor","border","selectedMenuItem","GameMenu","items","onSelected","classes","useState","selectedItemIndex","setSelectedItemIndex","useEffect","handleKeyPressed","e","code","className","classNames","onMouseEnter","onClick","dialogMessage","Message","message","trail","onMessageEnded","forceShowFullMessage","useMemo","letter","transitions","useTransition","display","enter","onRest","status","controller","styles","span","style","dialogWindow","messageBoxHeight","imageRendering","borderImage","dialogBorderBox","minHeight","dialogTitle","fontWeight","dialogFooter","bottom","DialogBox","messages","onDone","currentMessage","setCurrentMessage","messageEnded","setMessageEnded","setForceShowFullMessage","handleClick","useCallback","action","coinContainer","userSelect","backgroundSize","background","coinFull","strokeSize","textShadow","HeroCoin","toString","padStart","healthContainer","healthStateFull","healthImage","healthStateHalf","healthStateEmpty","HeroHealth","healthState","floor","innerHeight","calculateGameSize","modal","alignItems","justifyContent","paper","palette","boxShadow","shadows","spacing","overflow","postContainer","maxWidth","maxHeight","gameContentWrapper","margin","pageWrapper","marginTop","marginLeft","preLoadDialogImage","backgroundImage","backgroundRepeat","gameWrapper","gameGif","dialogs","App","setMessages","setCharacterName","gameMenuItems","setGameMenuItems","gameMenuPosition","setGameMenuPosition","heroHealthStates","setHeroHealthStates","setHeroCoins","handleMessageIsDone","handleMenuItemSelected","Phaser","Game","AUTO","title","parent","orientation","Scale","LANDSCAPE","localStorageName","autoRound","pixelArt","autoCenter","CENTER_BOTH","mode","ENVELOP","GameOverScene","default","plugins","plugin","GridEngine","mapping","dialogBoxEventListener","gameMenuEventListener","heroHealthEventListener","heroCoinEventListener","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.6cd30b97.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/hero.680baedf.png\";","export default __webpack_public_path__ + \"static/media/slime.3a5fd77a.png\";","export default __webpack_public_path__ + \"static/media/heart.277f826b.png\";","export default __webpack_public_path__ + \"static/media/coin.d7185127.png\";","export default __webpack_public_path__ + \"static/media/tileset.bce8ab10.png\";","export default __webpack_public_path__ + \"static/media/main_menu_background.f7d244f3.png\";","export default __webpack_public_path__ + \"static/media/game_over_background.21509171.png\";","export default __webpack_public_path__ + \"static/media/game_logo.1bdd4ed4.png\";","export default __webpack_public_path__ + \"static/media/heart_container.db75eb15.png\";","export default __webpack_public_path__ + \"static/media/sword.4d0808f2.png\";","export default __webpack_public_path__ + \"static/media/push.0c204cb5.png\";","export default __webpack_public_path__ + \"static/media/npc_01.85943aad.png\";","export default __webpack_public_path__ + \"static/media/npc_02.128762a8.png\";","export default __webpack_public_path__ + \"static/media/npc_03.88a643c6.png\";","export default __webpack_public_path__ + \"static/media/npc_04.ddb002b4.png\";","import { Scene } from 'phaser';\n\n// Houses files\nimport homePageHouse01Map from '../assets/sprites/maps/houses/home_page_city_house_01.json';\nimport homePageHouse02Map from '../assets/sprites/maps/houses/home_page_city_house_02.json';\nimport homePageHouse03Map from '../assets/sprites/maps/houses/home_page_city_house_03.json';\n\n// Cities files\nimport homePageCity from '../assets/sprites/maps/cities/home_page_city.json';\n\n// Characters files\nimport heroJson from '../assets/sprites/atlas/hero.json';\nimport slimeJson from '../assets/sprites/atlas/slime.json';\nimport heartJson from '../assets/sprites/atlas/heart.json';\nimport coinJson from '../assets/sprites/atlas/coin.json';\n\n// NPC jsons\nimport npc01Json from '../assets/sprites/atlas/npc_01.json';\nimport npc02Json from '../assets/sprites/atlas/npc_02.json';\nimport npc03Json from '../assets/sprites/atlas/npc_03.json';\nimport npc04Json from '../assets/sprites/atlas/npc_04.json';\n\n// Images\nimport heroImage from '../assets/sprites/atlas/hero.png';\nimport slimeImage from '../assets/sprites/atlas/slime.png';\nimport heartImage from '../assets/sprites/atlas/heart.png';\nimport coinImage from '../assets/sprites/atlas/coin.png';\nimport tilesetImage from '../assets/sprites/maps/tilesets/tileset.png';\nimport mainMenuBackgroundImage from '../assets/images/main_menu_background.png';\nimport gameOverBackgroundImage from '../assets/images/game_over_background.png';\nimport gameLogoImage from '../assets/images/game_logo.png';\nimport heartContainerImage from '../assets/images/heart_container.png';\nimport swordImage from '../assets/images/sword.png';\nimport pushImage from '../assets/images/push.png';\n\n// NPC images\nimport npc01Image from '../assets/sprites/atlas/npc_01.png';\nimport npc02Image from '../assets/sprites/atlas/npc_02.png';\nimport npc03Image from '../assets/sprites/atlas/npc_03.png';\nimport npc04Image from '../assets/sprites/atlas/npc_04.png';\n\nexport default class BootScene extends Scene {\n    constructor() {\n        super('BootScene');\n    }\n\n    preload() {\n        const fontSize = 16;\n\n        // setup loading bar\n        const progressBar = this.add.graphics();\n        const progressBox = this.add.graphics();\n        const { width: gameWidth, height: gameHeight } = this.cameras.main;\n\n        const barPositionX = Math.ceil((gameWidth - (gameWidth * 0.7)) / 2);\n        progressBox.fillStyle(0x222222, 0.8);\n        progressBox.fillRect(\n            barPositionX,\n            Math.ceil(gameHeight / 6),\n            Math.ceil(gameWidth * 0.7),\n            Math.ceil(gameHeight / 10)\n        );\n\n        const loadingText = this.add.text(\n            gameWidth / 2,\n            Math.ceil(gameHeight / 10),\n            'loading...',\n            {\n                fontFamily: '\"Press Start 2P\"',\n                fontSize: `${fontSize}px`,\n                size: `${fontSize}px`,\n                fill: '#ffffff',\n                color: '#ffffff',\n            }\n        );\n\n        loadingText.setOrigin(0.5);\n        loadingText.setResolution(30);\n\n        const percentText = this.add.text(\n            gameWidth / 2,\n            Math.ceil((gameHeight / 6) + (fontSize / 2) + (gameHeight / 60)),\n            '0%',\n            {\n                fontFamily: '\"Press Start 2P\"',\n                fontSize: `${fontSize}px`,\n                size: `${fontSize}px`,\n                fill: '#ffffff',\n                color: '#ffffff',\n            }\n        );\n\n        percentText.setOrigin(0.5);\n        percentText.setResolution(30);\n\n        const assetText = this.add.text(\n            gameWidth / 2,\n            Math.ceil(gameHeight / 3),\n            '',\n            {\n                fontFamily: '\"Press Start 2P\"',\n                fontSize: `${fontSize / 2}px`,\n                size: `${fontSize / 2}px`,\n                fill: '#ffffff',\n                color: '#ffffff',\n            }\n        );\n\n        assetText.setOrigin(0.5);\n        assetText.setResolution(30);\n\n        this.load.on('progress', (value) => {\n            progressBar.clear();\n            progressBar.fillStyle(0xFFFFFF, 1);\n            progressBar.fillRect(\n                barPositionX,\n                Math.ceil(gameHeight / 6),\n                Math.ceil(gameWidth * 0.7) * value,\n                Math.ceil(gameHeight / 10)\n            );\n            percentText.setText(`${Number.parseInt(value * 100, 10)}%`);\n        });\n\n        this.load.on('fileprogress', (file) => {\n            assetText.setText(`loading: ${file.key}`);\n        });\n\n        this.load.on('complete', () => {\n            progressBar.destroy();\n            progressBox.destroy();\n            percentText.destroy();\n            assetText.destroy();\n        });\n\n        // Maps\n        this.load.tilemapTiledJSON('home_page_city', homePageCity);\n        this.load.tilemapTiledJSON('home_page_city_house_01', homePageHouse01Map);\n        this.load.tilemapTiledJSON('home_page_city_house_02', homePageHouse02Map);\n        this.load.tilemapTiledJSON('home_page_city_house_03', homePageHouse03Map);\n\n        // Atlas\n        this.load.atlas('hero', heroImage, heroJson);\n        this.load.atlas('slime', slimeImage, slimeJson);\n        this.load.atlas('heart', heartImage, heartJson);\n        this.load.atlas('coin', coinImage, coinJson);\n\n        // NPCs\n        this.load.atlas('npc_01', npc01Image, npc01Json);\n        this.load.atlas('npc_02', npc02Image, npc02Json);\n        this.load.atlas('npc_03', npc03Image, npc03Json);\n        this.load.atlas('npc_04', npc04Image, npc04Json);\n\n        // Tilesets\n        this.load.image('tileset', tilesetImage);\n\n        // Images\n        this.load.image('main_menu_background', mainMenuBackgroundImage);\n        this.load.image('game_over_background', gameOverBackgroundImage);\n        this.load.image('game_logo', gameLogoImage);\n        this.load.image('heart_container', heartContainerImage);\n        this.load.image('sword', swordImage);\n        this.load.image('push', pushImage);\n    }\n\n    create() {\n        this.scene.start('MainMenuScene');\n    }\n}\n","import { Scene } from 'phaser';\n\nexport default class MainMenuScene extends Scene {\n    constructor() {\n        super('MainMenuScene');\n    }\n\n    preload() {\n        // TODO\n    }\n\n    create() {\n        const { width: gameWidth, height: gameHeight } = this.cameras.main;\n\n        this.add.image(gameWidth / 2, Math.ceil(gameHeight / 10), 'game_logo')\n            .setOrigin(0.5, 0)\n            .setDepth(1);\n\n        const scale = Math.max(Math.ceil(gameWidth / 480), Math.ceil(gameHeight / 216));\n        this.add.image(0, 0, 'main_menu_background')\n            .setScale(scale)\n            .setDepth(0)\n            .setOrigin(0, 0);\n\n        const customEvent = new CustomEvent('menu-items', {\n            detail: {\n                menuItems: ['start', 'exit'],\n                menuPosition: 'center',\n            },\n        });\n\n        window.dispatchEvent(customEvent);\n        const gameMenuSelectedEventListener = ({ detail }) => {\n            switch (detail.selectedItem) {\n                case 'start': {\n                    this.scene.start('GameScene', {\n                        heroStatus: {\n                            position: { x: 4, y: 3 },\n                            previousPosition: { x: 4, y: 3 },\n                            frame: 'hero_idle_down_01',\n                            facingDirection: 'down',\n                            health: 60,\n                            maxHealth: 60,\n                            coin: 0,\n                            canPush: false,\n                            haveSword: false,\n                        },\n                        mapKey: 'home_page_city_house_01',\n                    });\n                    break;\n                }\n\n                case 'exit': {\n                    window.location.reload();\n                    break;\n                }\n\n                case 'settings': {\n                    break;\n                }\n\n                default: {\n                    break;\n                }\n            }\n\n            window.removeEventListener(\n                'menu-item-selected',\n                gameMenuSelectedEventListener\n            );\n        };\n\n        window.addEventListener(\n            'menu-item-selected',\n            gameMenuSelectedEventListener\n        );\n    }\n}\n","import { Scene } from 'phaser';\n\nexport default class MainMenuScene extends Scene {\n    constructor() {\n        super('GameOverScene');\n    }\n\n    preload() {\n        // TODO\n    }\n\n    create() {\n        const fontSize = 24;\n        const { width: gameWidth, height: gameHeight } = this.cameras.main;\n\n        const gameOverText = this.add.text(\n            gameWidth / 2,\n            Math.ceil(gameHeight / 5),\n            'game over',\n            {\n                fontFamily: '\"Press Start 2P\"',\n                fontSize: `${fontSize}px`,\n                size: `${fontSize}px`,\n                fill: '#ffffff',\n                color: '#ffffff',\n            }\n        ).setDepth(10).setOrigin(0.5, 0.5);\n\n        const scale = Math.max(Math.ceil(gameWidth / 220), Math.ceil(gameHeight / 124));\n        this.add.image(0, 0, 'game_over_background')\n            .setScale(scale)\n            .setDepth(0)\n            .setOrigin(0, 0);\n\n        const customEvent = new CustomEvent('menu-items', {\n            detail: {\n                menuItems: ['game.game_over.retry', 'game.game_over.exit'],\n                menuPosition: 'center',\n            },\n        });\n\n        window.dispatchEvent(customEvent);\n        const gameMenuSelectedEventListener = ({ detail }) => {\n            switch (detail.selectedItem) {\n                case 'game.game_over.retry': {\n                    this.scene.start('MainMenuScene');\n                    break;\n                }\n\n                case 'game.game_over.exit': {\n                    window.location.reload();\n                    break;\n                }\n\n                default: {\n                    break;\n                }\n            }\n\n            window.removeEventListener(\n                'menu-item-selected',\n                gameMenuSelectedEventListener\n            );\n        };\n\n        window.addEventListener(\n            'menu-item-selected',\n            gameMenuSelectedEventListener\n        );\n    }\n}\n","import { GameObjects } from 'phaser';\n\nexport const createInteractiveGameObject = (\n    scene,\n    x,\n    y,\n    width,\n    height,\n    name,\n    isDebug = false,\n    origin = { x: 0, y: 1 }\n) => {\n    const customCollider = new GameObjects.Rectangle(\n        scene,\n        x,\n        y,\n        width,\n        height\n    ).setOrigin(origin.x, origin.y);\n    customCollider.name = name;\n    customCollider.isCustomCollider = true;\n\n    if (isDebug) {\n        customCollider.setFillStyle(0x741B47);\n    }\n\n    scene.physics.add.existing(customCollider);\n    customCollider.body.setAllowGravity(false);\n    customCollider.body.setImmovable(true);\n\n    return customCollider;\n};\n\nexport const calculateGameSize = () => {\n    let width = 400;\n    let height = 224; // 16 * 14 = 224\n    const multiplier = Math.min(Math.floor(window.innerWidth / 400), Math.floor(window.innerHeight / 224)) || 1;\n\n    if (multiplier > 1) {\n        width += Math.floor((window.innerWidth - width * multiplier) / (16 * multiplier)) * 16;\n        height += Math.floor((window.innerHeight - height * multiplier) / (16 * multiplier)) * 16;\n    }\n\n    return { width, height, multiplier };\n};\n","export const SCENE_FADE_TIME = 300;\nexport const ATTACK_DELAY_TIME = 50;\n\n// Tileset stuff\nexport const BUSH_INDEX = 428;\nexport const BOX_INDEX = 427;\nexport const COIN_INDEX = 192;\nexport const HEART_CONTAINER_INDEX = 233;\n\nexport const NPC_MOVEMENT_RANDOM = 'random';\nexport const NPC_MOVEMENT_STILL = 'still';\n\n// Enemies\nexport const ENEMY_AI_TYPE = 'follow';\n\n// Save data\nexport const SAVE_DATA_KEY = 'pablogg_game_data';\n","import { Input, Math as PhaserMath, Scene } from 'phaser';\nimport { createInteractiveGameObject } from '../utils';\nimport {\n    ATTACK_DELAY_TIME,\n    BOX_INDEX,\n    BUSH_INDEX,\n    ENEMY_AI_TYPE,\n    NPC_MOVEMENT_RANDOM,\n    SCENE_FADE_TIME,\n} from '../constants';\n\nexport default class GameScene extends Scene {\n    constructor() {\n        super('GameScene');\n    }\n\n    enterKey = {};\n    spaceKey = {};\n    cursors = {};\n    wasd = {};\n    isShowingDialog = false;\n    isTeleporting = false;\n    isAttacking = false;\n\n    init(data) {\n        this.initData = data;\n    }\n\n    calculatePreviousTeleportPosition() {\n        const currentPosition = this.gridEngine.getPosition('hero');\n        const facingDirection = this.gridEngine.getFacingDirection('hero');\n\n        switch (facingDirection) {\n            case 'up': {\n                return {\n                    x: currentPosition.x,\n                    y: currentPosition.y + 1,\n                };\n            }\n\n            case 'right': {\n                return {\n                    x: currentPosition.x - 1,\n                    y: currentPosition.y,\n                };\n            }\n\n            case 'down': {\n                return {\n                    x: currentPosition.x,\n                    y: currentPosition.y - 1,\n                };\n            }\n\n            case 'left': {\n                return {\n                    x: currentPosition.x + 1,\n                    y: currentPosition.y,\n                };\n            }\n\n            default: {\n                return {\n                    x: currentPosition.x,\n                    y: currentPosition.y,\n                };\n            }\n        }\n    }\n\n    getFramesForAnimation(assetKey, animation) {\n        return this.anims.generateFrameNames(assetKey)\n            .filter((frame) => {\n                if (frame.frame.includes(`${assetKey}_${animation}`)) {\n                    const parts = frame.frame.split(`${assetKey}_${animation}_`);\n                    return Boolean(!Number.isNaN(Number.parseInt(parts[1], 10)));\n                }\n\n                return false;\n            })\n            .sort((a, b) => (a.frame < b.frame ? -1 : 1));\n    }\n\n    createPlayerWalkingAnimation(assetKey, animationName) {\n        this.anims.create({\n            key: `${assetKey}_${animationName}`,\n            frames: [\n                { key: assetKey, frame: `${assetKey}_${animationName}_01` },\n                { key: assetKey, frame: `${assetKey}_${animationName.replace('walking', 'idle')}_01` },\n                { key: assetKey, frame: `${assetKey}_${animationName}_02` },\n            ],\n            frameRate: 4,\n            repeat: -1,\n            yoyo: true,\n        });\n    }\n\n    createPlayerAttackAnimation(assetKey, animationName) {\n        this.anims.create({\n            key: `${assetKey}_${animationName}`,\n            frames: [\n                { key: assetKey, frame: `${assetKey}_${animationName}_01` },\n                { key: assetKey, frame: `${assetKey}_${animationName}_02` },\n                { key: assetKey, frame: `${assetKey}_${animationName}_03` },\n                { key: assetKey, frame: `${assetKey}_${animationName}_04` },\n                { key: assetKey, frame: `${assetKey}_${animationName.replace('attack', 'idle')}_01` },\n            ],\n            frameRate: 16,\n            repeat: 0,\n            yoyo: false,\n        });\n    }\n\n    getStopFrame(direction, spriteKey) {\n        switch (direction) {\n            case 'up':\n                return `${spriteKey}_idle_up_01`;\n            case 'right':\n                return `${spriteKey}_idle_right_01`;\n            case 'down':\n                return `${spriteKey}_idle_down_01`;\n            case 'left':\n                return `${spriteKey}_idle_left_01`;\n            default:\n                return null;\n        }\n    }\n\n    getOppositeDirection(direction) {\n        switch (direction) {\n            case 'up':\n                return 'down';\n            case 'right':\n                return 'left';\n            case 'down':\n                return 'up';\n            case 'left':\n                return 'right';\n            default:\n                return null;\n        }\n    }\n\n    getBackPosition(facingDirection, position) {\n        switch (facingDirection) {\n            case 'up':\n                return {\n                    ...position,\n                    y: position.y + 1,\n                };\n            case 'right':\n                return {\n                    ...position,\n                    x: position.x - 1,\n                };\n            case 'down':\n                return {\n                    ...position,\n                    y: position.y - 1,\n                };\n            case 'left':\n                return {\n                    ...position,\n                    x: position.x + 1,\n                };\n            default:\n                return position;\n        }\n    }\n\n    extractTeleportDataFromTiled(data) {\n        const [mapKey, position] = data.trim().split(':');\n        const [x, y] = position.split(',');\n\n        return {\n            mapKey,\n            x: Number.parseInt(x, 10),\n            y: Number.parseInt(y, 10),\n        };\n    }\n\n    extractNpcDataFromTiled(data) {\n        const [npcKey, config] = data.trim().split(':');\n        const [movementType, delay, area, direction] = config.split(';');\n\n        return {\n            npcKey,\n            movementType,\n            facingDirection: direction,\n            delay: Number.parseInt(delay, 10),\n            area: Number.parseInt(area, 10),\n        };\n    }\n\n    calculateHeroHealthState(health) {\n        if (health > 10) {\n            return 'full';\n        }\n\n        if (health > 0) {\n            return 'half';\n        }\n\n        return 'empty';\n    }\n\n    calculateHeroHealthStates() {\n        return Array.from({ length: this.heroSprite.maxHealth / 20 })\n            .fill(null).map(\n                (v, index) => this.calculateHeroHealthState(\n                    Math.max(this.heroSprite.health - (20 * index), 0)\n                )\n            );\n    }\n\n    updateHeroHealthUi(healthStates) {\n        const customEvent = new CustomEvent('hero-health', {\n            detail: {\n                healthStates,\n            },\n        });\n\n        window.dispatchEvent(customEvent);\n    }\n\n    updateHeroCoinUi(heroCoins) {\n        const customEvent = new CustomEvent('hero-coin', {\n            detail: {\n                heroCoins,\n            },\n        });\n\n        window.dispatchEvent(customEvent);\n    }\n\n    getEnemySpecies(enemyType) {\n        if (enemyType.includes('slime')) {\n            return 'slime';\n        }\n\n        return 'slime';\n    }\n\n    getEnemyColor(enemyType) {\n        if (enemyType.includes('red')) {\n            return 0xF1374B;\n        }\n\n        if (enemyType.includes('green')) {\n            return 0x2BBD6E;\n        }\n\n        if (enemyType.includes('yellow')) {\n            return 0xFFFF4F;\n        }\n\n        return 0x00A0DC;\n    }\n\n    getEnemyAttackSpeed(enemyType) {\n        if (enemyType.includes('red')) {\n            return 2000;\n        }\n\n        if (enemyType.includes('green')) {\n            return 3000;\n        }\n\n        if (enemyType.includes('yellow')) {\n            return 4000;\n        }\n\n        return 5000;\n    }\n\n    spawnItem(position) {\n        const isDebugMode = this.physics.config.debug;\n        const itemChance = PhaserMath.Between(1, isDebugMode ? 2 : 5);\n        if (itemChance === 1) {\n            const itemType = PhaserMath.Between(1, 2);\n\n            if (itemType === 1) {\n                const item = this.physics.add\n                    .sprite(position.x, position.y, 'heart')\n                    .setDepth(1)\n                    .setOrigin(0, 0);\n                item.itemType = 'heart';\n                this.itemsSprites.add(item);\n                item.anims.play('heart_idle');\n            } else if (itemType === 2) {\n                const item = this.physics.add\n                    .sprite(position.x, position.y, 'coin')\n                    .setDepth(1)\n                    .setOrigin(0, 0);\n                item.itemType = 'coin';\n                this.itemsSprites.add(item);\n                item.anims.play('coin_idle');\n            }\n        }\n    }\n\n    calculatePushTilePosition() {\n        const facingDirection = this.gridEngine.getFacingDirection('hero');\n        const position = this.gridEngine.getPosition('hero');\n\n        switch (facingDirection) {\n            case 'up':\n                return {\n                    x: position.x * 16,\n                    y: (position.y - 2) * 16,\n                };\n\n            case 'right':\n                return {\n                    x: (position.x + 2) * 16,\n                    y: position.y * 16,\n                };\n\n            case 'down':\n                return {\n                    x: position.x * 16,\n                    y: (position.y + 2) * 16,\n                };\n\n            case 'left':\n                return {\n                    x: (position.x - 2) * 16,\n                    y: position.y * 16,\n                };\n\n            default:\n                return {\n                    x: position.x * 16,\n                    y: position.y * 16,\n                };\n        }\n    }\n\n    create() {\n        const camera = this.cameras.main;\n        const { game } = this.sys;\n        const isDebugMode = this.physics.config.debug;\n        const { heroStatus, mapKey } = this.initData;\n        const {\n            position: initialPosition,\n            frame: initialFrame,\n            facingDirection: initialFacingDirection,\n            previousPosition,\n            health: heroHealth,\n            maxHealth: heroMaxHealth,\n            coin: heroCoin,\n            canPush: heroCanPush,\n            haveSword: heroHaveSword,\n        } = heroStatus;\n\n        camera.fadeIn(SCENE_FADE_TIME);\n\n        this.enterKey = this.input.keyboard.addKey(Input.Keyboard.KeyCodes.ENTER);\n        this.spaceKey = this.input.keyboard.addKey(Input.Keyboard.KeyCodes.SPACE);\n        this.cursors = this.input.keyboard.createCursorKeys();\n        this.wasd = this.input.keyboard.addKeys({\n            up: Input.Keyboard.KeyCodes.W,\n            down: Input.Keyboard.KeyCodes.S,\n            left: Input.Keyboard.KeyCodes.A,\n            right: Input.Keyboard.KeyCodes.D,\n        });\n\n        // Map\n        const map = this.make.tilemap({ key: mapKey });\n        map.addTilesetImage('tileset', 'tileset');\n\n        if (isDebugMode) {\n            window.phaserGame = game;\n            this.map = map;\n        }\n\n        // Hero\n        this.heroSprite = this.physics.add\n            .sprite(0, 0, 'hero', initialFrame)\n            .setDepth(1);\n        this.heroSprite.health = heroHealth;\n        this.heroSprite.maxHealth = heroMaxHealth;\n        this.heroSprite.coin = heroCoin;\n        this.heroSprite.canPush = heroCanPush;\n        this.heroSprite.haveSword = heroHaveSword;\n        this.updateHeroHealthUi(this.calculateHeroHealthStates());\n        this.updateHeroCoinUi(heroCoin);\n\n        this.heroSprite.restoreHealth = (restore) => {\n            this.heroSprite.health = Math.min(this.heroSprite.health + restore, this.heroSprite.maxHealth);\n            this.updateHeroHealthUi(this.calculateHeroHealthStates());\n        };\n\n        this.heroSprite.increaseMaxHealth = (increase) => {\n            this.heroSprite.maxHealth += increase;\n            this.updateHeroHealthUi(this.calculateHeroHealthStates());\n        };\n\n        this.heroSprite.collectCoin = (coinQuantity) => {\n            this.heroSprite.coin = Math.min(this.heroSprite.coin + coinQuantity, 999);\n            this.updateHeroCoinUi(this.heroSprite.coin);\n        };\n\n        this.heroSprite.takeDamage = (damage) => {\n            this.time.delayedCall(\n                180,\n                () => {\n                    this.heroSprite.health -= damage;\n                    if (this.heroSprite.health <= 0) {\n                        camera.fadeOut(SCENE_FADE_TIME);\n                        this.updateHeroHealthUi([]);\n                        this.updateHeroCoinUi(null);\n                        this.time.delayedCall(\n                            SCENE_FADE_TIME,\n                            () => {\n                                this.isTeleporting = false;\n                                this.scene.start('GameOverScene');\n                            }\n                        );\n                    } else {\n                        this.updateHeroHealthUi(this.calculateHeroHealthStates());\n                        this.tweens.add({\n                            targets: this.heroSprite,\n                            alpha: 0,\n                            ease: PhaserMath.Easing.Elastic.InOut,\n                            duration: 70,\n                            repeat: 1,\n                            yoyo: true,\n                        });\n                    }\n                }\n            );\n        };\n        this.heroSprite.body.setSize(14, 14);\n        this.heroSprite.body.setOffset(9, 13);\n        this.heroActionCollider = createInteractiveGameObject(\n            this,\n            this.heroSprite.x + 9,\n            this.heroSprite.y + 36,\n            14,\n            8,\n            'attack',\n            isDebugMode\n        );\n        this.heroPresenceCollider = createInteractiveGameObject(\n            this,\n            this.heroSprite.x + 16,\n            this.heroSprite.y + 20,\n            320, // TODO\n            320, // TODO\n            'presence',\n            isDebugMode,\n            { x: 0.5, y: 0.5 }\n        );\n        this.heroObjectCollider = createInteractiveGameObject(\n            this,\n            this.heroSprite.x + 16,\n            this.heroSprite.y + 20,\n            24,\n            24,\n            'object',\n            isDebugMode,\n            { x: 0.5, y: 0.5 }\n        );\n\n        // Items\n        this.itemsSprites = this.add.group();\n        if (!this.anims.exists('heart_idle')) {\n            this.anims.create({\n                key: 'heart_idle',\n                frames: this.getFramesForAnimation('heart', 'idle'),\n                frameRate: 4,\n                repeat: -1,\n                yoyo: false,\n            });\n        }\n\n        if (!this.anims.exists('coin_idle')) {\n            this.anims.create({\n                key: 'coin_idle',\n                frames: this.getFramesForAnimation('coin', 'idle'),\n                frameRate: 4,\n                repeat: -1,\n                yoyo: false,\n            });\n        }\n\n        const enemiesData = [];\n        const elementsLayers = this.add.group();\n        for (let i = 0; i < map.layers.length; i++) {\n            const layer = map.createLayer(i, 'tileset', 0, 0);\n            layer.layer.properties.forEach((property) => {\n                const { value, name } = property;\n\n                if (name === 'type' && value === 'elements') {\n                    elementsLayers.add(layer);\n                }\n            });\n\n            this.physics.add.collider(this.heroSprite, layer);\n        }\n\n        const npcsKeys = [];\n        const dataLayer = map.getObjectLayer('actions');\n        dataLayer.objects.forEach((data) => {\n            const { properties, x, y } = data;\n\n            properties.forEach((property) => {\n                const { name, type, value } = property;\n\n                switch (name) {\n                    case 'dialog': {\n                        const customCollider = createInteractiveGameObject(\n                            this,\n                            x,\n                            y,\n                            16,\n                            16,\n                            'dialog',\n                            isDebugMode\n                        );\n\n                        this.physics.add.overlap(this.heroActionCollider, customCollider, (objA, objB) => {\n                            if (this.isShowingDialog) {\n                                return;\n                            }\n\n                            if (Input.Keyboard.JustDown(this.enterKey)) {\n                                const characterName = value;\n                                const customEvent = new CustomEvent('new-dialog', {\n                                    detail: {\n                                        characterName,\n                                    },\n                                });\n\n                                window.dispatchEvent(customEvent);\n                                const dialogBoxFinishedEventListener = () => {\n                                    window.removeEventListener(\n                                        `${characterName}-dialog-finished`,\n                                        dialogBoxFinishedEventListener\n                                    );\n\n                                    // just to consume the JustDown\n                                    Input.Keyboard.JustDown(this.enterKey);\n                                    Input.Keyboard.JustDown(this.spaceKey);\n\n                                    this.time.delayedCall(100, () => {\n                                        this.isShowingDialog = false;\n                                    });\n                                };\n                                window.addEventListener(\n                                    `${characterName}-dialog-finished`,\n                                    dialogBoxFinishedEventListener\n                                );\n\n                                this.isShowingDialog = true;\n                            }\n                        });\n\n                        break;\n                    }\n\n                    case 'npcData': {\n                        const {\n                            facingDirection,\n                            movementType,\n                            npcKey,\n                            delay,\n                            area,\n                        } = this.extractNpcDataFromTiled(value);\n\n                        npcsKeys.push({\n                            facingDirection,\n                            movementType,\n                            npcKey,\n                            delay,\n                            area,\n                            x,\n                            y,\n                        });\n                        break;\n                    }\n\n                    case 'itemData': {\n                        const [itemType] = value.split(':');\n\n                        switch (itemType) {\n                            case 'coin': {\n                                const item = this.physics.add\n                                    .sprite(x, y, 'coin')\n                                    .setDepth(1)\n                                    .setOrigin(0, 1);\n\n                                item.itemType = 'coin';\n                                this.itemsSprites.add(item);\n                                item.anims.play('coin_idle');\n                                break;\n                            }\n\n                            case 'heart_container': {\n                                const item = this.physics.add\n                                    .sprite(x, y, 'heart_container')\n                                    .setDepth(1)\n                                    .setOrigin(0, 1);\n\n                                item.itemType = 'heart_container';\n                                this.itemsSprites.add(item);\n                                break;\n                            }\n\n                            case 'heart': {\n                                const item = this.physics.add\n                                    .sprite(x, y, 'heart')\n                                    .setDepth(1)\n                                    .setOrigin(0, 1);\n\n                                item.itemType = 'heart';\n                                this.itemsSprites.add(item);\n                                item.anims.play('heart_idle');\n                                break;\n                            }\n\n                            case 'sword': {\n                                if (!heroHaveSword) {\n                                    const item = this.physics.add\n                                        .sprite(x, y, 'sword')\n                                        .setDepth(1)\n                                        .setOrigin(0, 1);\n\n                                    item.itemType = 'sword';\n                                    this.itemsSprites.add(item);\n                                }\n\n                                break;\n                            }\n\n                            case 'push': {\n                                if (!heroCanPush) {\n                                    const item = this.physics.add\n                                        .sprite(x, y, 'push')\n                                        .setDepth(1)\n                                        .setOrigin(0, 1);\n\n                                    item.itemType = 'push';\n                                    this.itemsSprites.add(item);\n                                }\n\n                                break;\n                            }\n\n                            default: {\n                                break;\n                            }\n                        }\n\n                        break;\n                    }\n\n                    case 'enemyData': {\n                        const [enemyType, enemyAI, speed, health] = value.split(':');\n                        enemiesData.push({\n                            x,\n                            y,\n                            speed: Number.parseInt(speed, 10),\n                            enemyType,\n                            enemySpecies: this.getEnemySpecies(enemyType),\n                            enemyAI,\n                            enemyName: `${enemyType}_${enemiesData.length}`,\n                            health: Number.parseInt(health, 10),\n                        });\n                        break;\n                    }\n\n                    case 'teleportTo': {\n                        const customCollider = createInteractiveGameObject(\n                            this,\n                            x,\n                            y,\n                            16,\n                            16,\n                            'teleport',\n                            isDebugMode\n                        );\n\n                        const {\n                            mapKey: teleportToMapKey,\n                            x: teleportToX,\n                            y: teleportToY,\n                        } = this.extractTeleportDataFromTiled(value);\n\n                        const overlapCollider = this.physics.add.overlap(this.heroSprite, customCollider, () => {\n                            // camera.stopFollow();\n                            this.physics.world.removeCollider(overlapCollider);\n                            const facingDirection = this.gridEngine.getFacingDirection('hero');\n                            camera.fadeOut(SCENE_FADE_TIME);\n                            // this.scene.pause();\n                            this.isTeleporting = true;\n                            // this.gridEngine.stopMovement('hero');\n\n                            this.time.delayedCall(\n                                SCENE_FADE_TIME,\n                                () => {\n                                    this.isTeleporting = false;\n                                    this.scene.restart({\n                                        heroStatus: {\n                                            position: { x: teleportToX, y: teleportToY },\n                                            previousPosition: this.calculatePreviousTeleportPosition(),\n                                            frame: `hero_idle_${facingDirection}_01`,\n                                            facingDirection,\n                                            health: this.heroSprite.health,\n                                            maxHealth: this.heroSprite.maxHealth,\n                                            coin: this.heroSprite.coin,\n                                            canPush: this.heroSprite.canPush,\n                                            haveSword: this.heroSprite.haveSword,\n                                        },\n                                        mapKey: teleportToMapKey,\n                                    });\n                                }\n                            );\n                        });\n\n                        break;\n                    }\n\n                    default: {\n                        break;\n                    }\n                }\n            });\n        });\n\n        camera.startFollow(this.heroSprite, true);\n        camera.setFollowOffset(-this.heroSprite.width, -this.heroSprite.height);\n        camera.setBounds(\n            0,\n            0,\n            Math.max(map.widthInPixels, game.scale.gameSize.width),\n            Math.max(map.heightInPixels, game.scale.gameSize.height)\n        );\n\n        if (map.widthInPixels < game.scale.gameSize.width) {\n            camera.setPosition(\n                (game.scale.gameSize.width - map.widthInPixels) / 2\n            );\n        }\n\n        if (map.heightInPixels < game.scale.gameSize.height) {\n            camera.setPosition(\n                camera.x,\n                (game.scale.gameSize.height - map.heightInPixels) / 2\n            );\n        }\n\n        const gridEngineConfig = {\n            characters: [\n                {\n                    id: 'hero',\n                    sprite: this.heroSprite,\n                    startPosition: initialPosition,\n                    offsetY: 4,\n                },\n            ],\n        };\n\n        this.physics.add.overlap(this.heroSprite, this.itemsSprites, (objA, objB) => {\n            const item = [objA, objB].find((obj) => obj !== this.heroSprite);\n\n            if (item.itemType === 'heart') {\n                this.heroSprite.restoreHealth(20);\n                item.setVisible(false);\n                item.destroy();\n            }\n\n            if (item.itemType === 'coin') {\n                this.heroSprite.collectCoin(1);\n                item.setVisible(false);\n                item.destroy();\n            }\n\n            if (item.itemType === 'heart_container') {\n                this.heroSprite.increaseMaxHealth(20);\n                item.setVisible(false);\n                item.destroy();\n            }\n\n            if (item.itemType === 'sword') {\n                const customEvent = new CustomEvent('new-dialog', {\n                    detail: {\n                        characterName: item.itemType,\n                    },\n                });\n                window.dispatchEvent(customEvent);\n                this.isShowingDialog = true;\n                const dialogBoxFinishedEventListener = () => {\n                    window.removeEventListener(\n                        `${item.itemType}-dialog-finished`,\n                        dialogBoxFinishedEventListener\n                    );\n\n                    this.time.delayedCall(100, () => {\n                        this.isShowingDialog = false;\n                    });\n                };\n                window.addEventListener(\n                    `${item.itemType}-dialog-finished`,\n                    dialogBoxFinishedEventListener\n                );\n\n                this.heroSprite.haveSword = true;\n                item.setVisible(false);\n                item.destroy();\n            }\n\n            if (item.itemType === 'push') {\n                const customEvent = new CustomEvent('new-dialog', {\n                    detail: {\n                        characterName: item.itemType,\n                    },\n                });\n                window.dispatchEvent(customEvent);\n                this.isShowingDialog = true;\n                const dialogBoxFinishedEventListener = () => {\n                    window.removeEventListener(\n                        `${item.itemType}-dialog-finished`,\n                        dialogBoxFinishedEventListener\n                    );\n\n                    this.time.delayedCall(100, () => {\n                        this.isShowingDialog = false;\n                    });\n                };\n                window.addEventListener(\n                    `${item.itemType}-dialog-finished`,\n                    dialogBoxFinishedEventListener\n                );\n\n                this.heroSprite.canPush = true;\n                item.setVisible(false);\n                item.destroy();\n            }\n        });\n\n        this.enemiesSprites = this.add.group();\n        enemiesData.forEach((enemyData, index) => {\n            const { enemySpecies, enemyType, x, y, enemyName, speed, enemyAI, health } = enemyData;\n            const enemy = this.physics.add.sprite(0, 0, enemyType, `${enemySpecies}_idle_01`);\n            enemy.setTint(this.getEnemyColor(enemyType));\n            enemy.name = enemyName;\n            enemy.enemyType = enemyType;\n            enemy.enemySpecies = enemySpecies;\n            enemy.enemyAI = enemyAI;\n            enemy.speed = speed;\n            enemy.health = health;\n            enemy.isAttacking = false;\n            enemy.updateFollowHeroPosition = true;\n            enemy.lastKnowHeroPosition = { x: 0, y: 0 };\n            enemy.body.setSize(14, 14);\n            enemy.body.setOffset(9, 21);\n            this.enemiesSprites.add(enemy);\n            enemy.takeDamage = (damage, isSpaceJustDown) => {\n                if (isSpaceJustDown) {\n                    enemy.health -= damage;\n\n                    if (enemy.health < 0) {\n                        enemy.setVisible(false);\n                        const position = this.gridEngine.getPosition(enemy.name);\n                        this.spawnItem({\n                            x: position.x * 16,\n                            y: position.y * 16,\n                        });\n                        this.gridEngine.setPosition(enemy.name, { x: 1, y: 1 });\n                        enemy.destroy();\n                    } else {\n                        this.tweens.add({\n                            targets: enemy,\n                            alpha: 0,\n                            ease: PhaserMath.Easing.Elastic.InOut,\n                            duration: 70,\n                            repeat: 1,\n                            yoyo: true,\n                        });\n                    }\n                }\n            };\n\n            if (!this.anims.exists(`${enemySpecies}_idle`)) {\n                this.anims.create({\n                    key: `${enemySpecies}_idle`,\n                    frames: this.getFramesForAnimation(enemySpecies, 'idle'),\n                    frameRate: 8,\n                    repeat: -1,\n                    yoyo: false,\n                });\n            }\n\n            if (!this.anims.exists(`${enemySpecies}_attack`)) {\n                this.anims.create({\n                    key: `${enemySpecies}_attack`,\n                    frames: this.getFramesForAnimation(enemySpecies, 'attack'),\n                    frameRate: 12,\n                    repeat: 0,\n                    yoyo: false,\n                });\n            }\n\n            if (!this.anims.exists(`${enemySpecies}_walking`)) {\n                this.anims.create({\n                    key: `${enemySpecies}_walking`,\n                    frames: this.getFramesForAnimation(enemySpecies, 'walking'),\n                    frameRate: 8,\n                    repeat: -1,\n                    yoyo: false,\n                });\n            }\n\n            if (!this.anims.exists(`${enemySpecies}_die`)) {\n                this.anims.create({\n                    key: `${enemySpecies}_die`,\n                    frames: this.getFramesForAnimation(enemySpecies, 'die'),\n                    frameRate: 8,\n                    repeat: 0,\n                    yoyo: false,\n                });\n            }\n\n            enemy.anims.play(`${enemySpecies}_idle`);\n            enemy.on('animationcomplete', (animation) => {\n                if (animation.key.includes('attack')) {\n                    enemy.anims.play(`${enemySpecies}_idle`);\n                }\n            });\n\n            gridEngineConfig.characters.push({\n                id: enemyName,\n                sprite: enemy,\n                startPosition: { x: x / 16, y: (y / 16) - 1 },\n                speed,\n                offsetY: -4,\n            });\n        });\n\n        const npcSprites = this.add.group();\n        npcsKeys.forEach((npcData) => {\n            const { npcKey, x, y, facingDirection = 'down' } = npcData;\n            const npc = this.physics.add.sprite(0, 0, npcKey, `${npcKey}_idle_${facingDirection}_01`);\n            npc.body.setSize(14, 14);\n            npc.body.setOffset(9, 13);\n            npcSprites.add(npc);\n\n            this.createPlayerWalkingAnimation(npcKey, 'walking_up');\n            this.createPlayerWalkingAnimation(npcKey, 'walking_right');\n            this.createPlayerWalkingAnimation(npcKey, 'walking_down');\n            this.createPlayerWalkingAnimation(npcKey, 'walking_left');\n\n            gridEngineConfig.characters.push({\n                id: npcKey,\n                sprite: npc,\n                startPosition: { x: x / 16, y: (y / 16) - 1 },\n                speed: 1,\n                offsetY: 4,\n            });\n        });\n\n        // Movement\n        this.createPlayerWalkingAnimation('hero', 'walking_up');\n        this.createPlayerWalkingAnimation('hero', 'walking_right');\n        this.createPlayerWalkingAnimation('hero', 'walking_down');\n        this.createPlayerWalkingAnimation('hero', 'walking_left');\n\n        // Attack\n        this.createPlayerAttackAnimation('hero', 'attack_up', 12, 0, false);\n        this.createPlayerAttackAnimation('hero', 'attack_right', 12, 0, false);\n        this.createPlayerAttackAnimation('hero', 'attack_down', 12, 0, false);\n        this.createPlayerAttackAnimation('hero', 'attack_left', 12, 0, false);\n\n        this.heroSprite.on('animationcomplete', (animation, animationFrame) => {\n            if (animation.key.includes('attack')) {\n                this.isAttacking = false;\n            }\n        });\n\n        this.heroSprite.on('animationstop', (animation, animationFrame) => {\n            if (animation.key.includes('attack')) {\n                this.isAttacking = false;\n            }\n        });\n\n        this.gridEngine.create(map, gridEngineConfig);\n\n        // NPCs\n        npcsKeys.forEach((npcData) => {\n            const {\n                movementType,\n                npcKey,\n                delay,\n                area,\n            } = npcData;\n\n            if (movementType === NPC_MOVEMENT_RANDOM) {\n                this.gridEngine.moveRandomly(npcKey, delay, area);\n            }\n        });\n\n        // enemies\n        enemiesData.forEach((enemyData) => {\n            const {\n                enemyAI,\n                enemyName,\n                speed,\n            } = enemyData;\n\n            this.gridEngine.moveRandomly(enemyName, 1000, 4);\n        });\n        this.physics.add.overlap(this.heroObjectCollider, this.enemiesSprites, (objA, objB) => {\n            const enemy = [objA, objB].find((obj) => obj !== this.heroObjectCollider);\n            if (enemy.isAttacking || this.gridEngine.isMoving(enemy.name)) {\n                return;\n            }\n\n            enemy.anims.play(`${enemy.enemySpecies}_attack`);\n            this.heroSprite.takeDamage(10);\n            enemy.isAttacking = true;\n            this.time.delayedCall(\n                this.getEnemyAttackSpeed(enemy.enemyType),\n                () => {\n                    enemy.isAttacking = false;\n                }\n            );\n        });\n\n        this.physics.add.overlap(this.heroPresenceCollider, this.enemiesSprites, (objA, objB) => {\n            const enemy = [objA, objB].find((obj) => obj !== this.heroPresenceCollider);\n\n            if (enemy.canSeeHero && enemy.enemyAI === ENEMY_AI_TYPE) {\n                enemy.isFollowingHero = true;\n                if (enemy.updateFollowHeroPosition) {\n                    const facingDirection = this.gridEngine.getFacingDirection('hero');\n                    const heroPosition = this.gridEngine.getPosition('hero');\n                    const heroBackPosition = this.getBackPosition(facingDirection, heroPosition);\n\n                    if (\n                        enemy.lastKnowHeroPosition.x !== heroBackPosition.x\n                        || enemy.lastKnowHeroPosition.y !== heroBackPosition.y\n                    ) {\n                        const enemyPosition = this.gridEngine.getPosition(enemy.name);\n                        enemy.lastKnowHeroPosition = heroBackPosition;\n\n                        if (\n                            heroBackPosition.x === enemyPosition.x\n                            && heroBackPosition.y === enemyPosition.y\n                        ) {\n                            enemy.updateFollowHeroPosition = false;\n                            // TODO can attack I guess\n                            return;\n                        }\n\n                        enemy.updateFollowHeroPosition = false;\n                        this.time.delayedCall(1000, () => {\n                            enemy.updateFollowHeroPosition = true;\n                        });\n\n                        this.gridEngine.setSpeed(enemy.name, Math.ceil(enemy.speed * 1.5));\n                        this.gridEngine.moveTo(enemy.name, heroBackPosition, {\n                            NoPathFoundStrategy: 'CLOSEST_REACHABLE',\n                        });\n                    }\n                }\n            }\n\n            enemy.canSeeHero = enemy.body.embedded;\n        });\n\n        // Animations\n        this.gridEngine.movementStarted().subscribe(({ charId, direction }) => {\n            if (charId === 'hero') {\n                this.heroSprite.anims.play(`hero_walking_${direction}`);\n            } else {\n                const npc = npcSprites.getChildren().find((npcSprite) => npcSprite.texture.key === charId);\n                if (npc) {\n                    npc.anims.play(`${charId}_walking_${direction}`);\n                    return;\n                }\n\n                const enemy = this.enemiesSprites.getChildren().find((enemySprite) => enemySprite.name === charId);\n                if (enemy) {\n                    enemy.anims.play(`${enemy.enemySpecies}_walking`);\n                }\n            }\n        });\n\n        this.gridEngine.movementStopped().subscribe(({ charId, direction }) => {\n            if (charId === 'hero') {\n                this.heroSprite.anims.stop();\n                this.heroSprite.setFrame(this.getStopFrame(direction, charId));\n            } else {\n                const npc = npcSprites.getChildren().find((npcSprite) => npcSprite.texture.key === charId);\n                if (npc) {\n                    npc.anims.stop();\n                    npc.setFrame(this.getStopFrame(direction, charId));\n                    return;\n                }\n\n                const enemy = this.enemiesSprites.getChildren().find((enemySprite) => enemySprite.name === charId);\n                if (enemy) {\n                    enemy.anims.play(`${enemy.enemySpecies}_idle`, true);\n                }\n            }\n        });\n\n        this.gridEngine.directionChanged().subscribe(({ charId, direction }) => {\n            if (charId === 'hero') {\n                this.heroSprite.setFrame(this.getStopFrame(direction, charId));\n            } else {\n                const npc = npcSprites.getChildren().find((npcSprite) => npcSprite.texture.key === charId);\n                if (npc) {\n                    npc.setFrame(this.getStopFrame(direction, charId));\n                    return;\n                }\n\n                const enemy = this.enemiesSprites.getChildren().find((enemySprite) => enemySprite.name === charId);\n                if (enemy) {\n                    enemy.anims.play(`${enemy.enemySpecies}_idle`);\n                }\n            }\n        });\n\n        this.heroActionCollider.update = () => {\n            const facingDirection = this.gridEngine.getFacingDirection('hero');\n            this.heroPresenceCollider.setPosition(\n                this.heroSprite.x + 16,\n                this.heroSprite.y + 20\n            );\n\n            this.heroObjectCollider.setPosition(\n                this.heroSprite.x + 16,\n                this.heroSprite.y + 20\n            );\n\n            switch (facingDirection) {\n                case 'down': {\n                    this.heroActionCollider.setSize(14, 8);\n                    this.heroActionCollider.body.setSize(14, 8);\n                    this.heroActionCollider.setX(this.heroSprite.x + 9);\n                    this.heroActionCollider.setY(this.heroSprite.y + 36);\n\n                    break;\n                }\n\n                case 'up': {\n                    this.heroActionCollider.setSize(14, 8);\n                    this.heroActionCollider.body.setSize(14, 8);\n                    this.heroActionCollider.setX(this.heroSprite.x + 9);\n                    this.heroActionCollider.setY(this.heroSprite.y + 12);\n\n                    break;\n                }\n\n                case 'left': {\n                    this.heroActionCollider.setSize(8, 14);\n                    this.heroActionCollider.body.setSize(8, 14);\n                    this.heroActionCollider.setX(this.heroSprite.x);\n                    this.heroActionCollider.setY(this.heroSprite.y + 21);\n\n                    break;\n                }\n\n                case 'right': {\n                    this.heroActionCollider.setSize(8, 14);\n                    this.heroActionCollider.body.setSize(8, 14);\n                    this.heroActionCollider.setX(this.heroSprite.x + 24);\n                    this.heroActionCollider.setY(this.heroSprite.y + 21);\n\n                    break;\n                }\n\n                default: {\n                    break;\n                }\n            }\n        };\n\n        this.physics.add.overlap(this.heroActionCollider, npcSprites, (objA, objB) => {\n            if (this.isShowingDialog) {\n                return;\n            }\n\n            const npc = [objA, objB].find((obj) => obj !== this.heroActionCollider);\n\n            if (Input.Keyboard.JustDown(this.enterKey)) {\n                if (this.gridEngine.isMoving(npc.texture.key)) {\n                    return;\n                }\n\n                const characterName = npc.texture.key;\n                const customEvent = new CustomEvent('new-dialog', {\n                    detail: {\n                        characterName,\n                    },\n                });\n\n                window.dispatchEvent(customEvent);\n                const dialogBoxFinishedEventListener = () => {\n                    window.removeEventListener(`${characterName}-dialog-finished`, dialogBoxFinishedEventListener);\n                    this.gridEngine.moveRandomly(characterName);\n\n                    // just to consume the JustDown\n                    Input.Keyboard.JustDown(this.enterKey);\n                    Input.Keyboard.JustDown(this.spaceKey);\n\n                    this.time.delayedCall(100, () => {\n                        this.isShowingDialog = false;\n                        const { delay, area } = npcsKeys.find((npcData) => npcData.npcKey === characterName);\n                        this.gridEngine.moveRandomly(characterName, delay, area);\n                    });\n                };\n                window.addEventListener(`${characterName}-dialog-finished`, dialogBoxFinishedEventListener);\n\n                this.isShowingDialog = true;\n                const facingDirection = this.gridEngine.getFacingDirection('hero');\n                this.gridEngine.stopMovement(characterName);\n                npc.setFrame(this.getStopFrame(this.getOppositeDirection(facingDirection), characterName));\n            }\n        });\n\n        this.physics.add.overlap(this.heroActionCollider, elementsLayers, (objA, objB) => {\n            const tile = [objA, objB].find((obj) => obj !== this.heroActionCollider);\n\n            // Handles attack\n            if (tile?.index > 0 && !tile.wasHandled) {\n                switch (tile.index) {\n                    case BUSH_INDEX: {\n                        if (this.isAttacking) {\n                            tile.wasHandled = true;\n\n                            this.time.delayedCall(\n                                ATTACK_DELAY_TIME,\n                                () => {\n                                    tile.setVisible(false);\n                                    this.spawnItem({\n                                        x: tile.pixelX,\n                                        y: tile.pixelY,\n                                    });\n                                    tile.destroy();\n                                }\n                            );\n                        }\n\n                        break;\n                    }\n\n                    case BOX_INDEX: {\n                        if (this.heroSprite.canPush && this.isAttacking) {\n                            const newPosition = this.calculatePushTilePosition();\n                            const canBePushed = map.layers.every((layer) => {\n                                const t = layer.tilemapLayer.getTileAtWorldXY(\n                                    newPosition.x,\n                                    newPosition.y\n                                );\n\n                                return !t?.properties?.ge_collide;\n                            });\n\n                            if (canBePushed && !tile.isMoved) {\n                                tile.isMoved = true;\n                                this.tweens.add({\n                                    targets: tile,\n                                    pixelX: newPosition.x,\n                                    pixelY: newPosition.y,\n                                    ease: 'Power2', // PhaserMath.Easing\n                                    duration: 700,\n                                    onComplete: () => {\n                                        tile.setVisible(false);\n                                        const newTile = tile.layer.tilemapLayer.putTileAt(\n                                            BOX_INDEX,\n                                            newPosition.x / 16,\n                                            newPosition.y / 16,\n                                            true\n                                        );\n\n                                        newTile.properties = {\n                                            ...tile.properties,\n                                        };\n                                        newTile.isMoved = true;\n                                        tile.destroy();\n                                    },\n                                });\n                            }\n                        }\n\n                        break;\n                    }\n\n                    default: {\n                        break;\n                    }\n                }\n            }\n        });\n\n        this.physics.add.overlap(this.heroActionCollider, this.enemiesSprites, (objA, objB) => {\n            const enemy = [objA, objB].find((obj) => obj !== this.heroActionCollider);\n\n            // Handles attack\n            if (this.isAttacking) {\n                const isSpaceJustDown = this.isSpaceJustDown;\n                this.time.delayedCall(\n                    ATTACK_DELAY_TIME,\n                    () => {\n                        enemy.takeDamage(25, isSpaceJustDown);\n                    }\n                );\n            }\n        });\n    }\n\n    update() {\n        this.isSpaceJustDown = Input.Keyboard.JustDown(this.spaceKey);\n\n        if (\n            this.isTeleporting\n            || this.isAttacking\n            || this.isShowingDialog\n        ) {\n            return;\n        }\n\n        if (\n            !this.gridEngine.isMoving('hero')\n            && this.isSpaceJustDown\n            && this.heroSprite.haveSword\n        ) {\n            const facingDirection = this.gridEngine.getFacingDirection('hero');\n            this.heroSprite.anims.play(`hero_attack_${facingDirection}`);\n            this.isAttacking = true;\n            return;\n        }\n\n        this.enemiesSprites.getChildren().forEach((enemy) => {\n            enemy.canSeeHero = enemy.body.embedded;\n            if (!enemy.canSeeHero && enemy.isFollowingHero) {\n                enemy.isFollowingHero = false;\n                this.gridEngine.setSpeed(enemy.name, enemy.speed);\n                this.gridEngine.moveRandomly(enemy.name, 1000, 4);\n            }\n        });\n\n        this.heroActionCollider.update();\n        if (this.cursors.left.isDown || this.wasd.left.isDown) {\n            this.gridEngine.move('hero', 'left');\n        } else if (this.cursors.right.isDown || this.wasd.right.isDown) {\n            this.gridEngine.move('hero', 'right');\n        } else if (this.cursors.up.isDown || this.wasd.up.isDown) {\n            this.gridEngine.move('hero', 'up');\n        } else if (this.cursors.down.isDown || this.wasd.down.isDown) {\n            this.gridEngine.move('hero', 'down');\n        }\n    }\n}\n","export default __webpack_public_path__ + \"static/media/dialog_borderbox.c5432d54.png\";","import { useEffect, useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport classNames from 'classnames';\n\nconst useStyles = makeStyles((theme) => ({\n    menuWrapper: ({ multiplier }) => ({\n        fontFamily: '\"Press Start 2P\"',\n        fontSize: `${10 * multiplier}px`,\n        textTransform: 'uppercase',\n        position: 'absolute',\n        transform: 'translate(-50%, 0%)',\n    }),\n    menuPositionWrapper: ({ multiplier, position, width, height }) => {\n        const left = window.innerWidth - (width * multiplier);\n        const menuWidth = 160 * multiplier;\n        if (position === 'center') {\n            return {\n                minWidth: `${menuWidth}px`,\n                left: '50%',\n                top: `${(height * multiplier) / 2}px`,\n            };\n        }\n\n        if (position === 'left') {\n            return {\n                minWidth: `${menuWidth}px`,\n                left: `${(95 * multiplier) + left / 2}px`,\n                top: `${50 * multiplier}px`,\n            };\n        }\n\n        return {};\n    },\n    menuItemsWrapper: {\n        textAlign: 'center',\n        padding: 0,\n    },\n    menuItem: ({ multiplier }) => ({\n        cursor: 'pointer',\n        listStyle: 'none',\n        padding: `${5 * multiplier}px`,\n        marginBottom: `${5 * multiplier}px`,\n        backgroundColor: '#94785c',\n        border: `${multiplier}px solid #79584f`,\n    }),\n    selectedMenuItem: ({ multiplier }) => ({\n        fontSize: `${11 * multiplier}px`,\n        border: `${multiplier}px solid #ddd`,\n    }),\n}));\n\nconst GameMenu = ({\n    items,\n    position = 'center',\n    gameSize,\n    onSelected,\n}) => {\n    const {\n        width,\n        height,\n        multiplier,\n    } = gameSize;\n\n    const classes = useStyles({\n        width,\n        height,\n        multiplier,\n        position,\n    });\n\n    const [selectedItemIndex, setSelectedItemIndex] = useState(0);\n\n    useEffect(() => {\n        const handleKeyPressed = (e) => {\n            switch (e.code) {\n                case 'Enter': {\n                    onSelected(items[selectedItemIndex]);\n                    break;\n                }\n\n                case 'ArrowUp': {\n                    if (selectedItemIndex > 0) {\n                        setSelectedItemIndex(\n                            selectedItemIndex - 1\n                        );\n                    }\n\n                    break;\n                }\n\n                case 'ArrowDown': {\n                    if (items.length - 1 > selectedItemIndex) {\n                        setSelectedItemIndex(\n                            selectedItemIndex + 1\n                        );\n                    }\n\n                    break;\n                }\n\n                default: {\n                    break;\n                }\n            }\n        };\n        window.addEventListener('keydown', handleKeyPressed);\n\n        return () => window.removeEventListener('keydown', handleKeyPressed);\n    }, [items, onSelected, selectedItemIndex]);\n\n    return (\n        <div className={classNames(classes.menuWrapper, classes.menuPositionWrapper)}>\n            <ul className={classes.menuItemsWrapper}>\n                {items.map((item, index) => (\n                    <li\n                        key={index}\n                        className={classNames(classes.menuItem, {\n                            [classes.selectedMenuItem]: selectedItemIndex === index,\n                        })}\n                        onMouseEnter={() => {\n                            setSelectedItemIndex(index);\n                        }}\n                        onClick={() => {\n                            onSelected(items[selectedItemIndex]);\n                        }}\n                    >\n                        {item}\n                    </li>\n                ))}\n            </ul>\n        </div>\n    );\n};\n\nexport default GameMenu;\n","import { useMemo } from 'react';\nimport { animated, useTransition } from 'react-spring';\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles((theme) => ({\n    dialogMessage: ({ multiplier }) => ({\n        fontFamily: '\"Press Start 2P\"',\n        fontSize: `${6 * multiplier}px`,\n        textTransform: 'uppercase',\n    }),\n}));\n\nconst Message = ({\n    message = [],\n    trail = 35,\n    multiplier = 1,\n    onMessageEnded = () => {},\n    forceShowFullMessage = false,\n}) => {\n    const classes = useStyles({ multiplier });\n    const items = useMemo(\n        () => message.trim().split('').map((letter, index) => ({\n            item: letter,\n            key: index,\n        })),\n        [message]\n    );\n\n    const transitions = useTransition(items, {\n        trail,\n        from: { display: 'none' },\n        enter: { display: '' },\n        onRest: (status, controller, item) => {\n            if (item.key === items.length - 1) {\n                onMessageEnded();\n            }\n        },\n    });\n\n    return (\n        <div className={classes.dialogMessage}>\n            {forceShowFullMessage && (\n                <span>{message}</span>\n            )}\n\n            {!forceShowFullMessage && transitions((styles, { item, key }) => (\n                <animated.span key={key} style={styles}>\n                    {item}\n                </animated.span>\n            ))}\n        </div>\n    );\n};\n\nexport default Message;\n","import { useCallback, useEffect, useState } from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\n\n// Images\nimport dialogBorderBox from './assets/images/dialog_borderbox.png';\n\n// Components\nimport Message from './Message';\n\nconst useStyles = makeStyles((theme) => ({\n    dialogWindow: ({ width, height, multiplier }) => {\n        const messageBoxHeight = Math.ceil((height / 3.5) * multiplier);\n        return {\n            imageRendering: 'pixelated',\n            fontFamily: '\"Press Start 2P\"',\n            textTransform: 'uppercase',\n            backgroundColor: '#e2b27e',\n            border: 'solid',\n            borderImage: `url(\"${dialogBorderBox}\") 6 / ${6 * multiplier}px ${6 * multiplier}px ${6 * multiplier}px ${6 * multiplier}px stretch`,\n            padding: `${8 * multiplier}px`,\n            position: 'absolute',\n            top: `${Math.ceil((height * multiplier) - (messageBoxHeight + messageBoxHeight * 0.1))}px`,\n            width: `${Math.ceil(width * 0.8 * multiplier)}px`,\n            left: '50%',\n            transform: 'translate(-50%, 0%)',\n            minHeight: `${messageBoxHeight}px`,\n        };\n    },\n    dialogTitle: ({ multiplier }) => ({\n        fontSize: `${8 * multiplier}px`,\n        marginBottom: `${6 * multiplier}px`,\n        fontWeight: 'bold',\n    }),\n    dialogFooter: ({ multiplier }) => ({\n        fontSize: `${8 * multiplier}px`,\n        cursor: 'pointer',\n        textAlign: 'end',\n        position: 'absolute',\n        right: `${6 * multiplier}px`,\n        bottom: `${6 * multiplier}px`,\n    }),\n}));\n\nconst DialogBox = ({\n    messages,\n    characterName,\n    onDone,\n    gameSize,\n}) => {\n    const {\n        width,\n        height,\n        multiplier,\n    } = gameSize;\n\n    const [currentMessage, setCurrentMessage] = useState(0);\n    const [messageEnded, setMessageEnded] = useState(false);\n    const [forceShowFullMessage, setForceShowFullMessage] = useState(false);\n    const classes = useStyles({\n        width,\n        height,\n        multiplier,\n    });\n\n    const handleClick = useCallback(() => {\n        if (messageEnded) {\n            setMessageEnded(false);\n            setForceShowFullMessage(false);\n            if (currentMessage < messages.length - 1) {\n                setCurrentMessage(currentMessage + 1);\n            } else {\n                setCurrentMessage(0);\n                onDone();\n            }\n        } else {\n            setMessageEnded(true);\n            setForceShowFullMessage(true);\n        }\n    }, [currentMessage, messageEnded, messages.length, onDone]);\n\n    useEffect(() => {\n        const handleKeyPressed = (e) => {\n            if (['Enter', 'Space', 'Escape'].includes(e.code)) {\n                handleClick();\n            }\n        };\n        window.addEventListener('keydown', handleKeyPressed);\n\n        return () => window.removeEventListener('keydown', handleKeyPressed);\n    }, [handleClick]);\n\n    return (\n        <div className={classes.dialogWindow}>\n            <div className={classes.dialogTitle}>\n                {characterName}\n            </div>\n            <Message\n                action={messages[currentMessage].action}\n                message={messages[currentMessage].message}\n                key={currentMessage}\n                multiplier={multiplier}\n                forceShowFullMessage={forceShowFullMessage}\n                onMessageEnded={() => {\n                    setMessageEnded(true);\n                }}\n            />\n            <div\n                onClick={handleClick}\n                className={classes.dialogFooter}\n            >\n                {(currentMessage === messages.length - 1 && messageEnded) ? 'Ok' : 'Next'}\n            </div>\n        </div>\n    );\n};\n\nexport default DialogBox;\n","export default __webpack_public_path__ + \"static/media/coin.cae0d64b.png\";","import { makeStyles } from '@material-ui/core/styles';\nimport classNames from 'classnames';\n\n// Images\nimport coinImage from './assets/images/coin.png';\n\nconst useStyles = makeStyles((theme) => ({\n    coinContainer: ({ multiplier, width }) => {\n        const left = window.innerWidth - (width * multiplier);\n        return {\n            fontFamily: '\"Press Start 2P\"',\n            fontSize: `${12 * multiplier}px`,\n            textTransform: 'uppercase',\n            imageRendering: 'pixelated',\n            position: 'absolute',\n            top: `${32 * multiplier}px`,\n            left: `${(16 * multiplier) + left / 2}px`,\n            display: 'flex',\n            cursor: 'default',\n            userSelect: 'none',\n        };\n    },\n    coin: ({ multiplier, width }) => ({\n        backgroundSize: `${16 * multiplier}px ${16 * multiplier}px`,\n        background: `url(\"${coinImage}\") no-repeat 0 0`,\n        width: `${16 * multiplier}px`,\n        height: `${16 * multiplier}px`,\n    }),\n    coinFull: ({ multiplier }) => {\n        const strokeSize = multiplier;\n        return {\n            fontSize: `${11 * multiplier}px`,\n            textShadow: `-${strokeSize}px 0 #FFFFFF, 0 ${strokeSize}px #FFFFFF, ${strokeSize}px 0 #FFFFFF, 0 -${strokeSize}px #FFFFFF`,\n            color: '#119923',\n        };\n    },\n}));\n\nconst HeroCoin = ({\n    gameSize,\n    heroCoins,\n}) => {\n    const {\n        width,\n        height,\n        multiplier,\n    } = gameSize;\n\n    const classes = useStyles({\n        width,\n        height,\n        multiplier,\n    });\n\n    return (\n        <div className={classes.coinContainer}>\n            <div className={classes.coin} />\n            <span\n                className={classNames({\n                    [classes.coinFull]: heroCoins >= 999,\n                })}\n            >\n                {heroCoins.toString().padStart(3, '0')}\n            </span>\n        </div>\n    );\n};\n\nexport default HeroCoin;\n","export default __webpack_public_path__ + \"static/media/health.b178a75b.png\";","import { makeStyles } from '@material-ui/core/styles';\nimport classNames from 'classnames';\n\n// Images\nimport healthImage from './assets/images/health.png';\n\nconst useStyles = makeStyles((theme) => ({\n    healthContainer: ({ multiplier, width }) => {\n        const left = window.innerWidth - (width * multiplier);\n        return {\n            imageRendering: 'pixelated',\n            position: 'absolute',\n            top: `${16 * multiplier}px`,\n            left: `${(16 * multiplier) + left / 2}px`,\n            display: 'flex',\n        };\n    },\n    health: ({ multiplier, width }) => ({\n        width: `${16 * multiplier}px`,\n        height: `${16 * multiplier}px`,\n    }),\n    healthStateFull: ({ multiplier }) => ({\n        backgroundSize: `${48 * multiplier}px ${16 * multiplier}px`,\n        background: `url(\"${healthImage}\") no-repeat 0 0`,\n    }),\n    healthStateHalf: ({ multiplier }) => ({\n        backgroundSize: `${48 * multiplier}px ${16 * multiplier}px`,\n        background: `url(\"${healthImage}\") no-repeat -${16 * multiplier}px 0`,\n    }),\n    healthStateEmpty: ({ multiplier }) => ({\n        backgroundSize: `${48 * multiplier}px ${16 * multiplier}px`,\n        background: `url(\"${healthImage}\") no-repeat -${32 * multiplier}px 0`,\n    }),\n}));\n\nconst HeroHealth = ({\n    gameSize,\n    healthStates,\n}) => {\n    const {\n        width,\n        height,\n        multiplier,\n    } = gameSize;\n\n    const classes = useStyles({\n        width,\n        height,\n        multiplier,\n    });\n\n    return (\n        <div className={classes.healthContainer}>\n            {healthStates.map((healthState, index) => (\n                <div\n                    key={index}\n                    className={classNames(classes.health, {\n                        [classes.healthStateFull]: healthState === 'full',\n                        [classes.healthStateHalf]: healthState === 'half',\n                        [classes.healthStateEmpty]: healthState === 'empty',\n                    })}\n                />\n            ))}\n        </div>\n    );\n};\n\nexport default HeroHealth;\n","import { useCallback, useEffect, useMemo, useState } from 'react';\nimport Phaser from 'phaser';\nimport GridEngine from 'grid-engine';\nimport BootScene from './game/scenes/BootScene';\nimport MainMenuScene from './game/scenes/MainMenuScene';\nimport GameOverScene from './game/scenes/GameOverScene';\nimport GameScene from './game/scenes/GameScene';\nimport { makeStyles } from '@material-ui/core/styles';\nimport classNames from 'classnames';\nimport { Backdrop, Fade, Modal, Typography } from '@material-ui/core';\nimport dialogBorderBox from './game/assets/images/dialog_borderbox.png';\nimport GameMenu from \"./game/GameMenu\";\nimport DialogBox from \"./game/DialogBox\";\nimport HeroCoin from \"./game/HeroCoin\";\nimport HeroHealth from \"./game/HeroHealth\";\nimport './App.css';\nimport { calculateGameSize } from \"./game/utils\";\n\nconst { width, height, multiplier } = calculateGameSize();\n\nconst useStyles = makeStyles((theme) => ({\n  modal: {\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  paper: {\n    backgroundColor: theme.palette.background.paper,\n    border: '2px solid #000',\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3),\n    overflow: 'auto',\n  },\n  postContainer: {\n    maxWidth: '90%',\n    maxHeight: '90%',\n  },\n  gameContentWrapper: {\n    width: `${width * multiplier}px`,\n    height: `${height * multiplier}px`,\n    margin: 'auto',\n    padding: 0,\n    overflow: 'hidden',\n    '& canvas': {\n      imageRendering: 'pixelated',\n      '-ms-interpolation-mode': 'nearest-neighbor',\n      boxShadow: '0px 0px 0px 3px rgba(0,0,0,0.75)',\n    },\n  },\n  pageWrapper: {\n    background: theme.palette.background.paper,\n    padding: 0,\n    margin: 0,\n  },\n  loadingText: {\n    fontFamily: '\"Press Start 2P\"',\n    marginTop: '30px',\n    marginLeft: '30px',\n  },\n  preLoadDialogImage: {\n    backgroundImage: `url(\"${dialogBorderBox}\")`,\n    backgroundSize: '1px',\n    backgroundRepeat: 'no-repeat',\n  },\n  gameWrapper: {\n    color: '#FFFFFF',\n  },\n  gameGif: {\n    width: '100%',\n    position: 'absolute',\n    imageRendering: 'pixelated',\n    top: 0,\n  },\n}));\n\nconst dialogs = {\n  \"npc_01\": [{\n    \"message\": \"Hello\",\n  }, {\n    \"message\": \"How are you?\",\n  }],\n  \"npc_02\": [{\n    \"message\": \"Hello there\",\n  }],\n  \"npc_03\": [{\n    \"message\": \"Hi\",\n  }, {\n    \"message\": \"Ok bye!\",\n  }],\n  \"npc_04\": [{\n    \"message\": \"Hey\",\n  }],\n  \"sword\": [{\n    \"message\": \"You got a sword\",\n  }],\n  \"push\": [{\n    \"message\": \"You can push boxes now\",\n  }],\n  \"sign_01\": [{\n    \"message\": \"You can read this!\",\n  }],\n  \"book_01\": [{\n    \"message\": \"Welcome to the game!\",\n  }]\n};\n\nfunction App() {\n  const classes = useStyles();\n  const [messages, setMessages] = useState([]);\n  const [characterName, setCharacterName] = useState('');\n  const [gameMenuItems, setGameMenuItems] = useState([]);\n  const [gameMenuPosition, setGameMenuPosition] = useState('center');\n  const [heroHealthStates, setHeroHealthStates] = useState([]);\n  const [heroCoins, setHeroCoins] = useState(null);\n\n  const handleMessageIsDone = useCallback(() => {\n    const customEvent = new CustomEvent(`${characterName}-dialog-finished`, {\n      detail: {},\n    });\n    window.dispatchEvent(customEvent);\n\n    setMessages([]);\n    setCharacterName('');\n  }, [characterName]);\n\n  const handleMenuItemSelected = useCallback((selectedItem) => {\n    setGameMenuItems([]);\n\n    const customEvent = new CustomEvent('menu-item-selected', {\n      detail: {\n        selectedItem,\n      },\n    });\n    window.dispatchEvent(customEvent);\n  }, []);\n\n  useEffect(() => {\n    const game = new Phaser.Game({\n      type: Phaser.AUTO,\n      title: 'some-game-title',\n      parent: 'game-content',\n      orientation: Phaser.Scale.LANDSCAPE,\n      localStorageName: 'some-game-title',\n      width,\n      height,\n      autoRound: true,\n      pixelArt: true,\n      scale: {\n        autoCenter: Phaser.Scale.CENTER_BOTH,\n        mode: Phaser.Scale.ENVELOP,\n      },\n      scene: [\n        BootScene,\n        MainMenuScene,\n        GameScene,\n        GameOverScene,\n      ],\n      physics: {\n        default: 'arcade',\n      },\n      plugins: {\n        scene: [\n          {\n            key: 'gridEngine',\n            plugin: GridEngine,\n            mapping: 'gridEngine',\n          },\n        ],\n      },\n      backgroundColor: '#000000',\n    });\n\n    // window.phaserGame = game;\n  }, []);\n\n  useEffect(() => {\n    const dialogBoxEventListener = ({ detail }) => {\n      // TODO fallback\n      setCharacterName(detail.characterName);\n      setMessages(\n          dialogs[detail.characterName]\n      );\n    };\n    window.addEventListener('new-dialog', dialogBoxEventListener);\n\n    const gameMenuEventListener = ({ detail }) => {\n      setGameMenuItems(detail.menuItems);\n      setGameMenuPosition(detail.menuPosition);\n    };\n    window.addEventListener('menu-items', gameMenuEventListener);\n\n    const heroHealthEventListener = ({ detail }) => {\n      setHeroHealthStates(detail.healthStates);\n    };\n    window.addEventListener('hero-health', heroHealthEventListener);\n\n    const heroCoinEventListener = ({ detail }) => {\n      setHeroCoins(detail.heroCoins);\n    };\n    window.addEventListener('hero-coin', heroCoinEventListener);\n\n    return () => {\n      window.removeEventListener('new-dialog', dialogBoxEventListener);\n      window.removeEventListener('menu-items', gameMenuEventListener);\n      window.removeEventListener('hero-health', heroHealthEventListener);\n      window.removeEventListener('hero-coin', heroCoinEventListener);\n    };\n  }, [setCharacterName, setMessages]);\n\n  return (\n      <div>\n        <div className={classes.gameWrapper}>\n          <div\n              id=\"game-content\"\n              className={classes.gameContentWrapper}\n          >\n            {/* this is where the game canvas will be rendered */}\n          </div>\n          {heroHealthStates.length > 0 && (\n              <HeroHealth\n                  gameSize={{\n                    width,\n                    height,\n                    multiplier,\n                  }}\n                  healthStates={heroHealthStates}\n              />\n          )}\n          {heroCoins !== null && (\n              <HeroCoin\n                  gameSize={{\n                    width,\n                    height,\n                    multiplier,\n                  }}\n                  heroCoins={heroCoins}\n              />\n          )}\n          {messages.length > 0 && (\n              <DialogBox\n                  onDone={handleMessageIsDone}\n                  characterName={characterName}\n                  messages={messages}\n                  gameSize={{\n                    width,\n                    height,\n                    multiplier,\n                  }}\n              />\n          )}\n          {gameMenuItems.length > 0 && (\n              <GameMenu\n                  items={gameMenuItems}\n                  gameSize={{\n                    width,\n                    height,\n                    multiplier,\n                  }}\n                  position={gameMenuPosition}\n                  onSelected={handleMenuItemSelected}\n              />\n          )}\n        </div>\n      </div>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}